<div *ngIf="!lights">
  <app-card cardTitle="Lampen worden opgehaald" cardSubTitle="We halen de lampen momenteel op"
            cardContent="Een moment geduld..."></app-card>
</div>

<div *ngIf="lights && lights.length > 0">
  <div class="flex flex-col bg-white rounded divide-y divide-gray-100 shadow">
    <div *ngFor="let light of lights"
         class="p-4 hover:bg-gray-100 transition-colors duration-100">
      <div class="flex flex-row justify-between items-center">
        <div [ngClass]="{'opacity-50': isPartying}" class="transition-opacity duration-100">
          <div class="rounded text-sm cursor-pointer text-white px-2 py-1 transition-colors duration-100 bg-red-600 hover:bg-red-700" *ngIf="partyLights.includes(light)" (click)="removeLight(light)">Verwijderen</div>
          <div class="rounded text-sm cursor-pointer text-white px-2 py-1 transition-colors duration-100 bg-blue-800 hover:bg-blue-900" *ngIf="!partyLights.includes(light)" (click)="addLight(light)">Toevoegen</div>
        </div>

        <div class="text-blue-800 font-bold">{{ light.name }}</div>
        <div class="cursor-pointer"
             (click)="light.config.expanded = light.config.expanded ? !light.config.expanded : true">
          <div class="material-icons" *ngIf="!light.config.expanded">expand_more</div>
          <div class="material-icons" *ngIf="light.config.expanded">expand_less</div>
        </div>
      </div>
      <div class="mt-2" *ngIf="light.config.expanded">
        <div class="text-sm bg-gray-200 rounded p-2 mb-4">
          {{ light.getInfo() | json }}
        </div>
      </div>
    </div>
  </div>
</div>

<div *ngIf="lights && lights.length == 0">
  <app-card cardTitle="Fout bij ophalen van lampen" cardSubTitle="We konden de lampen niet ophalen"
            cardContent="Er ging iets fout bij het ophalen van alle lampen, probeer het later opnieuw."></app-card>
</div>

<div class="my-4" *ngIf="canParty">
  <button class="rounded bg-blue-800 py-2 px-4 text-white" (click)="enableParty()" *ngIf="!shouldUpdate">
    Feesten maar!
  </button>

  <button class="rounded bg-red-500 py-2 px-4 text-white" (click)="disableParty()" *ngIf="shouldUpdate">
    Stop het feest
  </button>
</div>
